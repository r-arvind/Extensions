<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
            <!-- <script src="https://code.jquery.com/pep/0.4.2/pep.min.js"></script> -->
        <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.6.2/dat.gui.min.js"></script> -->
        <!-- <script src="https://preview.babylonjs.com/ammo.js"></script> -->
        <!-- <script src="https://preview.babylonjs.com/cannon.js"></script> -->
        <!-- <script src="https://preview.babylonjs.com/Oimo.js"></script> -->
        <!-- <script src="https://preview.babylonjs.com/earcut.min.js"></script> -->
        <script src="https://preview.babylonjs.com/babylon.js"></script>
        <!-- <script src="https://raw.githubusercontent.com/takahirox/mmd-parser/master/build/mmdparser.module.js"></script> -->
        <!-- <script src="/mmd-loader.js"></script> -->
        <script src="./src/mmd-parser.js"></script>
        <!-- <script src="https://preview.babylonjs.com/materialsLibrary/babylonjs.materials.min.js"></script> -->
        <!-- <script src="https://preview.babylonjs.com/proceduralTexturesLibrary/babylonjs.proceduralTextures.min.js"></script> -->
        <!-- <script src="https://preview.babylonjs.com/postProcessesLibrary/babylonjs.postProcess.min.js"></script> -->
        <!-- <script src="https://preview.babylonjs.com/loaders/babylonjs.loaders.js"></script> -->
        <!-- <script src="https://preview.babylonjs.com/serializers/babylonjs.serializers.min.js"></script> -->
        <!-- <script src="https://preview.babylonjs.com/gui/babylon.gui.min.js"></script> -->
        <!-- <script src="https://preview.babylonjs.com/inspector/babylon.inspector.bundle.js"></script> -->
</head>
<body>
    Check Console for Parsed Data
</body>

<script>
    var parser = new MMDParser.Parser();
  
    function load (url, responseType, mimeType, onLoad, onProgress, onError) {
      var request = new XMLHttpRequest();
      request.open('GET', url, true);
      request.addEventListener('load', function (event) {
        var response = event.target.response;
        if (this.status === 200) {
          onLoad(response);
        } else if (this.status === 0) {
          console.warn('HTTP Status 0 received.');
          onLoad(response);
        } else {
          console.warn('HTTP Status ' + this.status + ' received.');
          onError(event);
        }
      }, false);
      if (onProgress !== undefined) request.addEventListener('progress', onProgress, false);
      if (onError !== undefined) request.addEventListener('error', onError, false);
      request.responseType = responseType;
      if (mimeType !== undefined) request.overrideMimeType(mimeType)
      request.send(null);
      console.log('downloading: ' + url);
    }
  
    function testPmd () {
      console.log('PMD parse test');
      load(
        '/assets/miku.pmx',
        'arraybuffer',
        undefined,
        function (buffer) {
          var pmd = parser.parsePmx(buffer);
          console.log(pmd);
        }
      );
    }
  
    testPmd();
  </script>
</html>